# Паттерн Builder (Строитель)

## Описание

Строитель — это порождающий паттерн проектирования, который позволяет создавать сложные объекты пошагово. Он отделяет процесс конструирования сложного объекта от его представления, позволяя использовать один и тот же процесс строительства для создания различных представлений объектов.

## Когда использовать

- Когда процесс создания объекта должен допускать различные представления создаваемого объекта
- Когда алгоритм создания сложного объекта должен быть независим от составных частей объекта и способа их сборки
- Когда объект имеет сложную структуру с множеством опциональных параметров
- При необходимости создания "иммутабельных" объектов с большим количеством параметров

## Преимущества

- Позволяет создавать объекты пошагово, откладывая некоторые шаги или выполняя шаги рекурсивно
- Изолирует сложный код сборки от бизнес-логики продукта
- Позволяет использовать один и тот же код для создания различных продуктов
- Реализует принцип единственной ответственности (код создания и код бизнес-логики разделены)
- Позволяет лучше контролировать процесс создания объекта

## Недостатки

- Усложняет код из-за введения дополнительных классов
- Клиент привязывается к конкретным классам строителей, поскольку интерфейс директора может не включать всех возможных методов конфигурации
- Требует создания отдельного строителя для каждого разного типа продукта
- Код повторяется, если между продуктами мало общего

## Реализация на Python

```python
# Продукт
class Computer:
    def __init__(self):
        self.cpu = None
        self.ram = None
        self.storage = None
        self.gpu = None
        self.os = None
    
    def __str__(self):
        parts = []
        if self.cpu: parts.append(f"CPU: {self.cpu}")
        if self.ram: parts.append(f"RAM: {self.ram}GB")
        if self.storage: parts.append(f"Storage: {self.storage}GB")
        if self.gpu: parts.append(f"GPU: {self.gpu}")
        if self.os: parts.append(f"OS: {self.os}")
        return "\n".join(parts)

# Интерфейс строителя
class ComputerBuilder:
    def __init__(self):
        self.computer = Computer()
    
    def set_cpu(self, cpu):
        self.computer.cpu = cpu
        return self  # Возврат self для цепочки вызовов
    
    def set_ram(self, ram):
        self.computer.ram = ram
        return self
    
    def set_storage(self, storage):
        self.computer.storage = storage
        return self
    
    def set_gpu(self, gpu):
        self.computer.gpu = gpu
        return self
    
    def set_os(self, os):
        self.computer.os = os
        return self
    
    def build(self):
        return self.computer

# Директор
class ComputerDirector:
    def __init__(self, builder):
        self.builder = builder
    
    def build_gaming_pc(self):
        return self.builder\
            .set_cpu("Intel Core i9")\
            .set_ram(32)\
            .set_storage(2000)\
            .set_gpu("NVIDIA RTX 3080")\
            .set_os("Windows 11")\
            .build()
    
    def build_office_pc(self):
        return self.builder\
            .set_cpu("Intel Core i5")\
            .set_ram(16)\
            .set_storage(512)\
            .set_os("Windows 10")\
            .build()
```

## Где применяется в реальных проектах

- Создание сложных объектов конфигурации
- Построение запросов к базам данных (Query Builders)
- Создание документов в различных форматах (HTML, PDF, XML)
- Конструирование сложных объектов в UI (формы, отчеты)
- REST-клиенты и построители HTTP-запросов
- Создание сложных объектов в тестах (тестовые данные)
- Создание графических объектов в редакторах

## Связанные паттерны

- **Компоновщик**: Строители часто используются для построения сложных композитных объектов
- **Фабричный метод**: Директор может использовать фабричный метод для создания продуктов
- **Абстрактная фабрика**: Может создавать строителей для разных семейств продуктов
- **Одиночка**: Директор может быть реализован как синглтон
- **Текучий интерфейс**: Часто используется в реализации строителя (метод возвращает this/self)

## Рекомендации по использованию

- В Python часто используется упрощенная версия строителя с текучим интерфейсом без директора
- Хорошо подходит для объектов с большим количеством необязательных параметров
- Можно использовать для создания неизменяемых объектов
- Полезно, когда процесс создания объекта содержит условную логику
- Позволяет отложить создание финального объекта до последнего момента, когда все параметры определены
